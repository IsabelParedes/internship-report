% \usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{hyperref} % Links
% \usepackage{fourier-otf}  % Font
% \usepackage[OT1]{fontenc}
% \renewcommand*\familydefault{\sfdefault}
\usepackage[proportional,scaled=1.064]{erewhon}
\usepackage[erewhon,vvarbb,bigdelims]{newtxmath}
\usepackage[T1]{fontenc}
\renewcommand*\oldstylenums[1]{\textosf{#1}}


% Margins
\usepackage{geometry}
\geometry{a4paper, 
          top=3cm,
          bottom=2cm,
          left=2cm,
          right=2cm}
\usepackage{marginnote}

% Pictures
\usepackage{graphicx}
\graphicspath{{/Images}}

% Figures
\usepackage{float}
\usepackage{subcaption}
\usepackage{caption}
\captionsetup{
    font=footnotesize,
    labelfont=bf,
}
\usepackage{wrapfig}

% Background
% \usepackage{eso-pic}
% \newcommand\BackgroundPic{\put(-5,1){
%     \parbox[b][\paperheight]{\paperwidth}{
%     \includegraphics[width=22cm,height=\paperheight]{Images/orange_paper.jpg}}}}
% \newcommand\QuantLogo{\put(1cm,-2.5cm){
%     \parbox[b][\paperheight]{\paperwidth}{
%     \includegraphics[height=1.5cm]{Images/quantlogo.png}}}}
% \newcommand\rwthLogo{\put(14.2cm,-2.5cm){
%     \parbox[b][\paperheight]{\paperwidth}{
%     \includegraphics[height=1.5cm]{Images/rwthlogo.png}}}}

% Headers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[L]{Week \thechapter}
\fancyhead[R]{Isabel Paredes} % \rightmark for section title
\fancyfoot[C]{\thepage}
\fancyfoot[R,L]{}
\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\setlength{\headheight}{14.49998pt}


% Colors
\usepackage{xcolor}
\usepackage{lipsum} % Dummy text
\definecolor{light}{HTML}{FCE8D0}
\definecolor{dark}{HTML}{050505}
\definecolor{pop}{HTML}{EC5D95}
\definecolor{sections}{HTML}{F06F10}
\definecolor{title}{HTML}{BD2B0D}
\definecolor{contents}{HTML}{F1B11E}
\definecolor{links}{HTML}{1072EC} %1072EC %4556FE

% Table of contents fonts and formatting
\usepackage[titles]{tocloft}


% Sectioning Styles and Packages
\usepackage{titlesec}
%\usepackage{sectsty}

% CHAPTER heading redefinition
% Redefine size and position of chapter heading
% \titleformat{\chapter}{\fontsize{20pt}{0em}\selectfont\bf\color{dark}}
% {\thechapter. Week}{1em}{}

% % Change colour of chapter heading
% \titleformat{\chapter}
% {\fontsize{20pt}{0em}\selectfont\bf\color{yellow}}
% {\thechapter.}{1em}{}

% % Redefine spacing above chapter heading
% \titlespacing*{\chapter}{0pt}{-30pt}{20pt}

% % SECTION
% % Indent Section label
% \titlelabel{\llap{\makebox[1cm][l]{\thetitle}}\hspace*{25.4mm}}

% % Redefine font size of Section heading
\titleformat{\section}[hang]
{\normalfont\Large\bfseries\color{sections}}
{\thesection}{1em}{}

% % Redefine spacing above Section heading
% \titlespacing{\section}{0pt}{*4}{*1.5}      

% % SUBSECTION
% % Redefine size and position of Subsection heading
\titleformat{\subsection}[hang]
{\normalfont\normalsize\bfseries\color{sections}}
{\thesubsection}{1em}{}

% % Redefine size and position of subsubsection heading
% \titleformat{\subsubsection}[hang]
% {\normalfont\Normalsize\bfseries\color{darkBlue}}
% {\thesubsubsection.}{1em}{}

\usepackage{tikz}
\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% COVER %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand*\subtitle[1]{\def\@subtitle{#1}}
\newcommand*\makecover{
    %% Use the Tikz library positioning and clear the page header and footer
    \usetikzlibrary{positioning}
    \thispagestyle{empty}

    %% Constructing the cover page (cover image, name of university, logo and title text respectively)
    \begin{tikzpicture}[overlay,remember picture]

    \node[above=0,inner sep=0] at (current page.south) 
        {\includegraphics[width=21.1cm, height=\paperheight]{Images/orange_paper.jpg}};

    \node[above right=10mm] at (current page.south west) {%
        \includegraphics[width=0.35\linewidth]{Images/quantlogo.png}};
        
    \node[above left=10mm] at (current page.south east) {%
        \includegraphics[width=0.35\linewidth]{Images/rwthlogo.png}};

    \node[below=5.8cm,
          fill=light,
          minimum width={\paperwidth},
          inner ysep=25pt,
          opacity=0.7,
          text opacity=1
          ] 
          at (current page.north) 
          {%
            \begin{minipage}{0.9\paperwidth}
                \fontsize{50}{50}\selectfont\scshape\color{title}\@title \\[0.5ex]
                \color{title}\normalfont\fontsize{22}{22}\selectfont%
                \@subtitle{\\[2.5ex]}%
                \fontsize{24}{24}\bf\selectfont\color{dark}{\@author}
            \end{minipage}
          };

    \end{tikzpicture}
    \newpage
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CHAPTER %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Numbered chapters (with minitoc)
\renewcommand{\@makechapterhead}[1]
{
    \begin{tikzpicture}[remember picture, overlay]
    \node at (current page.north west)
    {
        \begin{tikzpicture}[remember picture, overlay]
            % \filldraw[fill=pop, draw=pop, line width=1pt] (-0.1,-3.5) rectangle (21.1,2);
            % Background image
            \node[anchor=north west,inner sep=0pt] at (0,0)
            {\includegraphics[width=25cm, height=5cm]{Images/orange_title_blur.jpg}};
            % Chapter heading
            \draw[anchor=west, inner sep=0pt] (4.5 cm,-2.5 cm) node
                [dark,
                thick,
                fill = light,
                fill opacity=0.7,
                text opacity=1,
                draw = light,
                draw opacity = 0,
                line width = 2pt,
                % rounded corners,
                inner sep=5pt]
                (0,0)
            {
                \parbox[t][2cm][t]{12cm}
                % {\vspace{0.25cm}\Huge\bfseries\center \thechapter.\hspace{0.2em} #1}
                {\vspace{0.25cm}\Huge\bfseries\center \hspace{0.2em} #1}
            };
        \end{tikzpicture}
    };
    \end{tikzpicture}
    \vspace{2.5cm}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% TOC  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{titletoc}
\setcounter{tocdepth}{2}

% Unnumbered chapters (without minitoc)
% \renewcommand{\@makeschapterhead}[1]{
%     \begin{tikzpicture}[remember picture,overlay]
%     \node at (current page.north west)
%     {
%         \begin{tikzpicture}[remember picture,overlay]
%         % Background image
%         % \filldraw[fill=contents, draw=contents, line width=4pt] (-0.1,-5) rectangle (21.1,2);
%         % Chapter heading
%         \draw[anchor=west,inner sep=0pt] (4.5 cm,-2.5cm) node
%             [dark,
%             ultra thick,
%             fill = contents,
%             fill opacity=1,
%             text opacity=1,
%             draw = contents,
%             line width = 0pt,
%             % rounded corners,
%             inner sep=5pt]
%             (0,0)
%             {\parbox[t][2cm][t]{12cm}{\vspace{0.25cm}\Large\bfseries\center #1}};
%         \end{tikzpicture}
%     };
%     \end{tikzpicture}
%     \vspace{1.5cm}
% }

% \titlecontents{chapter}[2cm]
%     {\addvspace{14pt}\Large\bfseries}
%     {\bf\color{dark}\contentslabel[\Large\thecontentslabel]{1.25cm}}{}
%     {}
\titlecontents{chapter}[2cm]
    {\addvspace{14pt}\hspace{-1.25cm}\Large\bfseries}
    {}{}{}

\titlecontents{section}[2cm]
    {\addvspace{6pt}\bfseries}
    {\bf\color{dark}\contentslabel[\thecontentslabel]{1.25cm}}{}
    {\color{dark}\small\;\titlerule*[.4pc]{.}\;\thecontentspage}

\titlecontents{subsection}[2cm]
    {}
    {\color{dark}\contentslabel[\thecontentslabel]{1.25cm}}{}
    {\color{dark}\small\;\titlerule*[.4pc]{.}\;\thecontentspage}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% URL %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=links,
    filecolor=links,      
    urlcolor=links,
    }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CODE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
\definecolor{lightgray}{HTML}{F7F7F7}
\definecolor{gray}{HTML}{D7D7D7}
\definecolor{darkgray}{HTML}{A7A7A7}
\definecolor{pyBlue}{HTML}{0000FF}
\definecolor{pyGreen}{HTML}{008000}
\definecolor{pyRed}{HTML}{BA2121}
\definecolor{pyTeal}{HTML}{007B9F}
\definecolor{pyPurple}{HTML}{A920FF}

\lstset{
    frame=tblr, %tb
    frameround=ffff, % True (t) or False (f) for square
    rulecolor=\color{gray},
    xleftmargin=1.5mm,
    xrightmargin=1.5mm,
    backgroundcolor=\color{lightgray},
    language=Python,
    aboveskip=3mm,
    belowskip=3mm,
    showstringspaces=false,
    columns=fixed, % flexible
    basicstyle={\small\ttfamily},
    numbers=none, % left, right
    numbersep=3mm,
    numberstyle=\tiny\color{darkgray},
    commentstyle=\color{pyTeal},
    stringstyle=\color{pyRed},
    keywordstyle=\bf\ttfamily\color{pyGreen},
    otherkeywords={;,=,\%\%},
    keywordstyle=[3]{\bf\ttfamily\color{pyPurple}},
    morekeywords=[3]{;,=,\%\%,print},
    emph={myfunction}, 
    emphstyle={\color{pyBlue}},
    % emph={[2]root,base},emphstyle={[2]\color{blue}}}
    breaklines=true,
    breakatwhitespace=true,
    tabsize=4,
}


\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{typeGreen}{HTML}{04AA6D}
\definecolor{typeRed}{HTML}{DC143C}
 
\lstdefinelanguage{TypeScript}{
keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
keywordstyle=\color{blue}\bfseries,
ndkeywords={class, export, boolean, throw, implements, import, this},
ndkeywordstyle=\color{blue}\bfseries,
identifierstyle=\color{black},
sensitive=false,
comment=[l]{//},
morecomment=[s]{/*}{*/},
commentstyle=\color{typeGreen}\ttfamily,
stringstyle=\color{typeRed}\ttfamily,
morestring=[b]',
morestring=[b]",
morekeywords=[3]{;,=,\%\%},
keywordstyle=[3]{\bf\ttfamily\color{black}},
}

\definecolor{bashRed}{HTML}{FD6062}
\definecolor{conDark}{HTML}{121212}
\lstdefinelanguage{Console}{
    basicstyle=\small\ttfamily\color{white},
    backgroundcolor=\color{conDark},
    keywords={},
    keywordstyle=\bf\ttfamily\color{white},
    morekeywords=[3]{},
    keywordstyle=[3]{\bf\ttfamily\color{white}}
    frame=tblr, %tb
    frameround=ffff, % f for square corner
    rulecolor=\color{conDark},
    numberstyle=\color{black},
    keepspaces=false,
    % lineskip=1.5mm
}

\definecolor{lightYellow}{HTML}{FFFBE5}
\definecolor{warnLight}{HTML}{FEEFB3}
\definecolor{warnDark}{HTML}{9F6000} %994500
\lstdefinelanguage{Warning}{
    keywords={type, login, for},
    basicstyle=\small\ttfamily\color{warnDark},
    backgroundcolor=\color{warnLight},
    keywordstyle=\color{warnDark},
    frame=tblr,
    frameround=ffff, %true or false
    rulecolor=\color{warnDark},
    columns=flexible
}

\definecolor{errLight}{HTML}{FFBABA}
\definecolor{errDark}{HTML}{D8000C} %dc3c1a
\lstdefinelanguage{Error}{
    basicstyle=\small\ttfamily\color{errDark},
    backgroundcolor=\color{errLight},
    keywordstyle=\color{errDark},
    frame=tblr,
    frameround=ffff,
    rulecolor=\color{errDark},
    columns=flexible
}

\lstdefinelanguage{Docker}{
    keywords={RUN, ADD, ENV, ENTRYPOINT, CMD, USER, ARG, FROM},
    keywordstyle=\color{blue},
    emph={=},
    emphstyle=\color{black}
}